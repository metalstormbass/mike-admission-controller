apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: mike-admission-controller
webhooks:
- name: mike-admission-controller.mike-admission-controller.svc
  rules:
  - apiGroups:   [""]
    apiVersions: ["v1"]
    operations:  ["CREATE"]
    resources:   ["pods", "deployments", "services"]
    scope:       "Namespaced"
  clientConfig:
    service:
      namespace: mike-admission-controller
      name: mike-admission-controller
      path: "/"
    # cat ca.crt | base64  
    caBundle: |
      LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMxakNDQWI0Q0NRQ2lvUk96RXFMNE5qQU5CZ2txaGtpRzl3MEJBUXNGQURBc01Tb3dLQVlEVlFRRERDRk4KYVd0bElFRmtiV2x6YzJsdmJpQkRiMjUwY205c2JHVnlJRmRsWW1odmIyc3dJQmNOTWpNd05qRTBNakEwT1RJMApXaGdQTWpFeU16QTFNakV5TURRNU1qUmFNQ3d4S2pBb0JnTlZCQU1NSVUxcGEyVWdRV1J0YVhOemFXOXVJRU52CmJuUnliMnhzWlhJZ1YyVmlhRzl2YXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUIKQU1PR21Oa3lma1hzSS9PajVVQjlwWHYrc1BTZGJmTFA2VVZLdkN3Z2pnUTk4K0ZLU2puMldsTU5WYVh1YWJjZApEcVNPVmlKVkhqRUxiZWE4ZVJEUEJaZlpTbkhuNXYvekNxcytQWWZIZXBPR1NpZm8vRGlGalUxcFBaT0ZJSWdiClIxekFDdDdqa0QwZ2xnK01jSER4b3dHelZDak1waXlrS3RzcWFxMWE3Ly9qdWdlOGtabk13Z2NQeGJFM1VBWDgKbks5TVBlUkRhNFJWUWliWWhNYXJ2ZTQwUzdzSWFFNE5wUkpiMTd2VDMvZWhxWXRYdFNBd2dZNW4wNEV4Yk5yYwpoZE1nZXQ1SHZMVVRCVFRJNFAwWTNNMjNFcnZvTlcwR3l5MWxPREVNQVpqOGJpa2ZXYVlYaHhYaGYxMElvS2F3CitzOW5Cc1BQbTlzQ1poMnNlb1pvc1dNQ0F3RUFBVEFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBWU1SSVZTSlYKZGc0dnJ4Q1NHSFUzZTRVaHJzSDJScXdac3VPZ2Q1YnZuaW5aNU5tZWozak5iSG9waWUyc1JXZkh0OUJwRzZxVQpiZHdMeDZsSS9IcHdlYWVEamdLZG5HU092bnd4NE1EMHVaOEdKeXpqQVZBQ0VzVEwxSVhZVHIxbjhtakN5WHNaClFRSHJoN0xFNisxSERjQ0VjaGxLMDZkZWtnVFlVZHhMazFlWkI3RHNSeG5oYXZHazZnVW9paTJONjhXRWZPdXYKeXJEKzhNQ0hZN0pvM3g5SmxrNDd6ZmMvTG1ENlJjNEhuWmx2aVhZMnV4YllDbzVzVjFMeldHdU00KzloU0RLdAp6K1pHODc2a3d3V0xBcnJ3L1pGVWlZcURGSEllN0dwcnJBTGRZR0FBUzcydHdQdUxINGZ1VkcwS2hOSHJ3MDRtCnpkaGtOTzRJZTlkUXVnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  admissionReviewVersions: ["v1"]
  sideEffects: None